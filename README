has_bookmarks
=============

Instalation
-----------

1) Install the plugin with `script/plugin install http://svn.simplesideias.com.br/general/rails/plugins/has_bookmarks`
2) Generate a migration with `script/generate migration create_bookmarks` and add the following code:

class CreateBookmarks < ActiveRecord::Migration
  def self.up
    create_table :bookmarks do |t|
      t.references :bookmarkable, :polymorphic => true
      t.references :user
      t.timestamps
    end
    
    add_index :bookmarks, :bookmarkable_id
    add_index :bookmarks, :bookmarkable_type
    add_index :bookmarks, :user_id
  end

  def self.down
    drop_table :bookmarks
  end
end

3) Run the migrations with `rake db:migrate`

Usage
-----

1) Add the method call `has_bookmarks` to your model.

class Photo < ActiveRecord::Base
  has_bookmarks
end

2) Add this association on your User model:

class User < ActiveRecord::Base
  has_many :bookmarks, :dependent => :destroy
end

photo = Photo.find(:first)
user = User.find(:first)

photo.bookmark(:user => user) # => <bookmark>
photo.bookmarks # => [<bookmark>]
photo.bookmarked?(user) # => true
photo.find_users_that_bookmarked # => [<user>]
photo.find_bookmark_by_user(user) # => [<bookmark>]

NOTE: You should have a User model. You should also have a bookmarks_count column on your model.
Otherwise, this won't work!

Copyright (c) 2008 Nando Vieira, released under the MIT license